@model ModelProduto
@{
    ViewBag.Title = "Venda no app";
    List<string> categorias = new List<string>{"Computadores e informática", "Eletrônicos, TV e Áudio","Games e Consoles","Galáxia"};
}

@Html.AntiForgeryToken()
<div class="container">
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a class="text-warning text-decoration-none" asp-action="SuaConta" asp-controller="Conta">Sua Conta</a></li>
            <li class="breadcrumb-item"><a class="text-warning text-decoration-none" asp-action="SeusProdutos" asp-controller="Conta">Seus Produtos</a></li>
            <li class="breadcrumb-item active" aria-current="page">Venda seu Produto</li>
        </ol>
    </nav>
    <nav style="--bs-breadcrumb-divider: '  ';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item "><a class="text-decoration-none btn-sm btn text-white bordaBottom" href="">Vender seu produto</a></li>
            <li class="breadcrumb-item "><a class="text-decoration-none btn-sm btn text-white" asp-action="SeusProdutos" asp-controller="Conta">Seus produtos</a></li>


        </ol>
    </nav>
</div>

<div class="container" style="background-color:white; border-radius:10px">
    <main>
        <div class="py-5 text-center">
            <h2>Venda</h2>
            <p class="lead">Abaixo insira as informações do seu produto</p>
        </div>

        <div class="row g-3">

            <div class="col-md-9 col-lg-12">
                <h4 class="mb-3">Seu produto</h4>
                <form enctype="multipart/form-data" method="post">
                    <div class="row g-3">

                        <div class="col-12">
                            <div class="form-floating py-1">
                                @Html.TextBoxFor(m => m.NomeProd, "", new {@id="Nome",@class="form-control form-control-sm letraP",@type="text", @Required ="Required", @placeholder="#",@title="Nome de produto" , @autocomplete="off"})
                                <label class="letraP" for="Nome">Nome</label>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-floating py-1">
                                @Html.TextBoxFor(m => m.MarcaProd, "", new {@id="Marca",@class="form-control form-control-sm letraP",@type="text", @Required ="Required", @placeholder="#",@title="Marca de produto" , @autocomplete="off"})
                                <label class="letraP" for="Marca">Marca</label>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="form-floating py-1">
                                @Html.TextBoxFor(m => m.ModeloProd, "", new {@id="Modelo",@class="form-control form-control-sm letraP",@type="text",@Required ="Required", @placeholder="#" ,@title="Modelo de produto", @autocomplete="off" })
                                <label class="letraP" for="Modelo">Modelo</label>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-floating py-1">
                                @Html.TextBoxFor(m => m.Fabricante, "", new {@id="Fabricante",@class="form-control form-control-sm letraP",@type="text",@Required ="Required", @placeholder="#" ,@title="Fabricante do produto", @autocomplete="off" })
                                <label class="letraP" for="Fabricante">Fabricante</label>
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-floating py-1">
                                @Html.TextBoxFor(m => m.PrecoProd, "", new {@id="Preco",@class="form-control form-control-sm letraP",@type="text",@maxlength="9", @Required ="Required", @placeholder="#",@title="Nome de produto", @onkeypress="return event.charCode >= 48 && event.charCode <= 57,Tipo(this,'MOEDA')",@onchange="Tipo(this,'MOEDA')", @autocomplete="off"})
                                <label class="letraP" for="Preco">Preço</label>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-floating py-1">
                                @Html.TextBoxFor(m => m.Qtd, "", new {@id="Qtd",@class="form-control form-control-sm letraP",@type="text", @placeholder="#",@Required ="Required", @title="Quantidade do estoque" ,@onkeypress="return event.charCode >= 48 && event.charCode <= 57", @autocomplete="off"})
                                <label class="letraP" for="Qtd">Quantidade em estoque</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <label for="exampleFormControlTextarea1" class="form-label">Descrição</label>
                            @Html.TextAreaFor(m => m.DescriProd,3,0,new{@class="form-control form-control-sm"})
                        </div>
                        <div class="col-md-5">
                            <label for="country" class="form-label">Categoria</label>
                            @Html.DropDownListFor(m => m.Categoria, new SelectList(categorias),"Escolha...", new {@class ="form-select",@id="SelectCategoria",@Required="required"})
                        </div>
                        <div class="col-md-7">
                            <label for="zip" class="form-label">Insira uma foto para seu produto</label>
                            @Html.TextBoxFor(m => m.File, "", new {@class ="form-control",@id ="formFileSm" ,@name = "file",@type="file",@accept="image/*",@aria_describedby="inputGroupFileAddon04",@aria_label="Upload",@Required="required"})
                        </div>
                    </div>
                    <div id="invalido">
                    </div>
                    <div id="ValidaEnvio" class=" d-grid gap-2 col-6 mx-auto">
                        <button class="w-100 btn btn-success btn-sm mb-3 mt-3" type="submit">Salvar</button>
                        
                    </div>
                </form>
            </div>
        </div>
    </main>

</div>
<script>
    var _URL = window.URL || window.webkitURL;
    $("#formFileSm").change(function (e) {

        var file, img;
        if ((file = this.files[0])) {
            img = new Image();
            img.onload = function () {
                if (this.width > (this.height + (this.height * 0.75)) && this.height > 300) {
                    $("#ValidaEnvio").html('<button id="EnviarProd" class="w-100 btn btn-success btn-sm mb-3 mt-3" type="submit">Enviar</button>');
                    $("#invalido").html('');
                }
                else {
                    $("#ValidaEnvio").html('<button id="EnviarProd" class="w-100 btn btn-success btn-sm mb-3 mt-3" disabled type="submit">Enviar</button>');
                    $("#invalido").html('<span style="color:red">Tamanho de imagem invalido (motivo para não perder a qualidade), largura da imagem deve ser 75% maior que altura exemplo: 1575x900 ou  minimo 525x300</span>');
                }
            };
            img.src = _URL.createObjectURL(file);
        }
    });
</script>